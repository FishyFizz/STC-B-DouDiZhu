AX51 MACRO ASSEMBLER  INTERRUPT_ENTRY                                                       06/28/22 00:09:51 PAGE     1


MACRO ASSEMBLER AX51 V3.15.3.0
OBJECT MODULE PLACED IN .\Objects\interrupt_entry.obj
ASSEMBLER INVOKED BY: C:\Program Files\Keil\C51\BIN\AX51.EXE Src\scheduler\interrupt_entry.a51 SET(SMALL) DEBUG PRINT(.\
                      Listings\interrupt_entry.lst) OBJECT(.\Objects\interrupt_entry.obj) EP

LOC    OBJ             LINE     SOURCE

                          1     
                          2     EXTERN CODE:NEAR (TIMER0_INTERRUPT, __RESCHEDULE)
                          3     
                          4     EXTERN DATA (FLAG_NOSCHED)
                          5             
                          6     ;=============================================================  
                          7     
00000B                    8     TIMER_INTERRUPT_ENTRANCE SEGMENT CODE AT 00Bh
------                    9     RSEG TIMER_INTERRUPT_ENTRANCE
00000B 020000     F      10         LJMP TIMER_0_INT
                         11     
                         12     ;=============================================================  
------                   13     INTERRUPT_HANDLER SEGMENT CODE
------                   14     RSEG INTERRUPT_HANDLER
                         15     
                         16         PUBLIC TIMER_0_INT
000000                   17         TIMER_0_INT:
                         18                     
                         19             ;Save program state, PC already saved by hardware
                         20             ;Size of interrupt frame is 15 bytes
                         21             
                         22             ;PUSH   PC_LOW
                         23             ;PUSH   PC_HIGH
000000 C0E0              24             PUSH    ACC
000002 C0F0              25             PUSH    B
000004 C083              26             PUSH    DPH 
000006 C082              27             PUSH    DPL 
000008 C0D0              28             PUSH    PSW
00000A C000              29             PUSH    0x00
00000C C001              30             PUSH    0x01
00000E C002              31             PUSH    0x02
000010 C003              32             PUSH    0x03
000012 C004              33             PUSH    0x04
000014 C005              34             PUSH    0x05
000016 C006              35             PUSH    0x06
000018 C007              36             PUSH    0x07
                         37     
00001A 120000     E      38             CALL TIMER0_INTERRUPT
                         39     
                         40             ;Restore program state
00001D D007              41             POP     0x07
00001F D006              42             POP     0x06
000021 D005              43             POP     0x05
000023 D004              44             POP     0x04
000025 D003              45             POP     0x03
000027 D002              46             POP     0x02
000029 D001              47             POP     0x01
00002B D000              48             POP     0x00
00002D D0D0              49             POP     PSW
00002F D082              50             POP     DPL
000031 D083              51             POP     DPH
000033 D0F0              52             POP     B
000035 D0E0              53             POP     ACC
000037 32                54             RETI
                         55     
                         56     ;============================================================= 
                         57         PUBLIC __YIELD
AX51 MACRO ASSEMBLER  INTERRUPT_ENTRY                                                       06/28/22 00:09:51 PAGE     2

000038                   58         __YIELD:
000038 750001     E      59             MOV FLAG_NOSCHED, #1
                         60     
                         61             ;Save program state, PC already saved by hardware
                         62             ;Size of interrupt frame is 15 bytes
                         63             
                         64             ;PUSH   PC_LOW
                         65             ;PUSH   PC_HIGH
00003B C0E0              66             PUSH    ACC
00003D C0F0              67             PUSH    B
00003F C083              68             PUSH    DPH 
000041 C082              69             PUSH    DPL 
000043 C0D0              70             PUSH    PSW
000045 C000              71             PUSH    0x00
000047 C001              72             PUSH    0x01
000049 C002              73             PUSH    0x02
00004B C003              74             PUSH    0x03
00004D C004              75             PUSH    0x04
00004F C005              76             PUSH    0x05
000051 C006              77             PUSH    0x06
000053 C007              78             PUSH    0x07
                         79     
000055 120000     E      80             CALL __RESCHEDULE
                         81     
                         82             ;Restore program state
000058 D007              83             POP     0x07
00005A D006              84             POP     0x06
00005C D005              85             POP     0x05
00005E D004              86             POP     0x04
000060 D003              87             POP     0x03
000062 D002              88             POP     0x02
000064 D001              89             POP     0x01
000066 D000              90             POP     0x00
000068 D0D0              91             POP     PSW
00006A D082              92             POP     DPL
00006C D083              93             POP     DPH
00006E D0F0              94             POP     B
000070 D0E0              95             POP     ACC
                         96     
000072 750000     E      97             MOV FLAG_NOSCHED, #0
000075 22                98             RET
                         99     
                        100     END
AX51 MACRO ASSEMBLER  INTERRUPT_ENTRY                                                       06/28/22 00:09:51 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                   T Y P E  V A L U E     ATTRIBUTES

__RESCHEDULE . . . . . . . . . . . . .    C  ADDR  -------       EXT
__YIELD. . . . . . . . . . . . . . . .    C  ADDR  0038H     R   SEG=INTERRUPT_HANDLER
ACC. . . . . . . . . . . . . . . . . .    D  ADDR  00E0H     A   
B. . . . . . . . . . . . . . . . . . .    D  ADDR  00F0H     A   
DPH. . . . . . . . . . . . . . . . . .    D  ADDR  0083H     A   
DPL. . . . . . . . . . . . . . . . . .    D  ADDR  0082H     A   
FLAG_NOSCHED . . . . . . . . . . . . .    D  ADDR  -------       EXT
INTERRUPT_HANDLER. . . . . . . . . . .    C  SEG   000076H       REL=UNIT, ALN=BYTE
PSW. . . . . . . . . . . . . . . . . .    D  ADDR  00D0H     A   
TIMER0_INTERRUPT . . . . . . . . . . .    C  ADDR  -------       EXT
TIMER_0_INT. . . . . . . . . . . . . .    C  ADDR  0000H     R   SEG=INTERRUPT_HANDLER
TIMER_INTERRUPT_ENTRANCE . . . . . . .    C  SEG   00000EH       REL=ABS, ALN=BYTE


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S).
